
#+Title: Build and use CosmOS

* To build a VM image
#+BEGIN_SRC shell
nix build .#CosmOS-GNOME
nix build .#COsmOS-Hyprland
#+END_SRC

* To install in a VM
Installation ISOs will *not* be provided for now. The snippet below sets
#+BEGIN_SRC fish
git clone https://github.com/zstg/CosmOS ~/.nixos
cd ~/.nixos/
#+END_SRC

Note that this *formats* your devices based on the schema provided in flake.nix. Failing to adjust the disko configuration accordingly may result in data loss, or worse, an unbootable system.
To perform the partitioning and install:
#+BEGIN_SRC fish
sudo nix \
    --extra-experimental-features 'flakes nix-command' \
    run github:nix-community/disko/latest#disko-install \
    -- --write-efi-boot-entries \
    --flake .?submodules=1#CosmOS-Hyprland \ # or any other spin
    --disk main /dev/vda 
#+END_SRC
